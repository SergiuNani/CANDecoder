/*-----User modifying variables----- */

var slow_loop = 1e-3; //1ms - ConvertUnits fct default;

/*-----Extract from string useful information----- */
var FirstPatternEntireRowSplitter = /['"`, \s]/g;

/*-----UPLOAD A CANLOG UI VARIABLES----- */
/*
 *VARIABLES LIST :
 */
var AllMsgRAW = [];
var AllMsgsExtracted_Array_g = [];
var AllMsgsDecoded_Array_g = [];
var FILTERED_ARRAY_g = [];

//Statistics--
var Unknown_Msgs_counter = 0;
var AllAxis_Msgs_NMT = 0;
var AllAxis_Msgs_sync = 0;
var AllAxis_Msgs_TCAN = 0;
var Available_Axes_perCANupload = [];

//Filtering--
var Keywords_nrAxisID_array = [];
var VirtArrays4AxisTypes = [];

class AXIS {
  constructor(
    NMT, //0
    EMCY, //1
    RPDO1, //2
    RPDO2, //3
    RPDO3, //4
    RPDO4, //5
    TPDO1, //6
    TPDO2, //7
    TPDO3, //8
    TPDO4, //9
    TSDO, //10
    RSDO, //11
    NMT_Monitoring, //12
    TCAN, //13
    ERRORS //14
  ) {
    this.NMT = NMT;
    this.EMCY = EMCY;
    this.RPDO1 = RPDO1;
    this.RPDO2 = RPDO2;
    this.RPDO3 = RPDO3;
    this.RPDO4 = RPDO4;
    this.TPDO1 = TPDO1;
    this.TPDO2 = TPDO2;
    this.TPDO3 = TPDO3;
    this.TPDO4 = TPDO4;
    this.TSDO = TSDO;
    this.RSDO = RSDO;
    this.NMT_Monitoring = NMT_Monitoring;
    this.TCAN = TCAN;
    this.ERRORS = ERRORS;
  }
}

var Types_of_Msgs_array = [
  " NMT",
  " EMCY",
  " RPDO1",
  " RPDO2",
  " RPDO3",
  " RPDO4",
  " TPDO1",
  " TPDO2",
  " TPDO3",
  " TPDO4",
  " TSDO",
  " RSDO",
  " NMT_M",
  " TCAN",
  " Errors",
];

/*-----Objects that influence mapping----- */
Mapping_objects_filter_array_g = [
  "1400",
  "1400_01",
  "1400_02",
  "1401",
  "1401_01",
  "1401_02",
  "1402",
  "1402_01",
  "1402_02",
  "1403",
  "1403_01",
  "1403_02",
  "1600",
  "1600_01",
  "1600_02",
  "1600_03",
  "1600_04",
  "1601",
  "1601_01",
  "1601_02",
  "1601_03",
  "1601_04",
  "1602",
  "1602_01",
  "1602_02",
  "1602_03",
  "1602_04",
  "1603",
  "1603_01",
  "1603_02",
  "1603_03",
  "1603_04",
  "1800",
  "1800_01",
  "1800_02",
  "1800_03",
  "1800_04",
  "1800_05",
  "1801",
  "1801_01",
  "1801_02",
  "1801_03",
  "1801_04",
  "1801_05",
  "1802",
  "1802_01",
  "1802_02",
  "1802_03",
  "1802_04",
  "1802_05",
  "1803",
  "1803_01",
  "1803_02",
  "1803_03",
  "1803_04",
  "1803_05",
  "1A00",
  "1A00_01",
  "1A00_02",
  "1A00_03",
  "1A00_04",
  "1A01",
  "1A01_01",
  "1A01_02",
  "1A01_03",
  "1A01_04",
  "1A02",
  "1A02_01",
  "1A02_02",
  "1A02_03",
  "1A02_04",
  "1A03",
  "1A03_01",
  "1A03_02",
  "1A03_03",
  "1A03_04",
];
/*-----Objects that can be influenced by factor group----- */

Position_FG_array = [
  "6064",
  "6062",
  "607A",
  "6068",
  "60F4",
  "6063",
  "607B",
  "607C",
];
Velocity_FG_array = [
  "606C",
  "606B",
  "606F",
  "60FF",
  "60F8",
  "6081",
  "6099_01",
  "6099_02",
];
Acceleration_FG_array = ["6083", "6085", "609A"];
Time_FG_array = [
  "6066",
  "6068",
  "2023",
  "2005",
  "2051",
  "1006",
  "1800_03",
  "1801_03",
  "1802_03",
  "1803_03",
  "1800_05",
  "1801_05",
  "1802_05",
  "1803_05",
];
Jerk_FG_array = ["idk wtf"]; //here is nothing

/*-----Recieve PDOs memory used for Compose_MSG_CAN_UI----- */
var RPDO_1_CM = ["6040", "00", "", "00", "", "00", "", "00"];
var RPDO_2_CM = ["6040", "00", "6060", "00", "", "00", "", "00"];
var RPDO_3_CM = ["6040", "00", "607A", "00", "", "00", "", "00"];
var RPDO_4_CM = ["6040", "00", "60FF", "00", "", "00", "", "00"];

/*-----Default PDOs  used for PDO_has_been_detected_UI----- */
var RPDO_1_pdo_default = ["6040", "00", "", "00"];
var RPDO_2_pdo_default = ["6040", "00", "6060", "00"];
var RPDO_3_pdo_default = ["6040", "00", "607A", "00"];
var RPDO_4_pdo_default = ["6040", "00", "60FF", "00"];

var TPDO_1_pdo_default = ["6041", "00", "", "00"];
var TPDO_2_pdo_default = ["6041", "00", "6061", "00"];
var TPDO_3_pdo_default = ["6041", "00", "6064", "00"];
var TPDO_4_pdo_default = ["6041", "00", "606C", "00"];
/*-----Compatible objects for  PDOs -- PDO_has_been_detected_UI----- */

var pdo_8 = ["6060"];
var pdo_16 = ["6040"];
var pdo_24 = ["6040", "100D"];
var pdo_32 = ["6085"];
var pdo_40 = ["6081", "6060"];
var pdo_48 = ["607A", "2023"];
var pdo_56 = ["607A", "6041", "6061"];
var pdo_64 = ["607A", "6081"];

/*-----Factor Group Units----- */
var FG_pos_rot_units = ["IU", "rad", "deg", "rot"];
var FG_pos_lin_units = ["IU", "m", "mm", "um"];
var FG_spd_rot_units = [
  "IU",
  "rad/s",
  "rpm",
  "rps",
  "deg/s",
  "deg/min",
  "in/s",
];
var FG_spd_lin_units = ["IU", "m/s", "mm/s", "um/s", "mm/min", "in/s"];
var FG_acc_rot_units = [
  "IU",
  "rad/s^2",
  "deg/s^2",
  "rot/s^2",
  "krad/s^2",
  "in/s^2",
];
var FG_acc_lin_units = ["IU", "m/s^2", "mm/s^2", "um/s^2", "in/s^2"];
var FG_jerk_rot_units = [
  "IU",
  "rad/s^3",
  "deg/s^3",
  "rot/s^3",
  "krad/s^3",
  "in/s^3",
];
var FG_jerk_lin_units = ["IU", "m/s^3", "mm/s^3", "um/s^3", "in/s^3"];
var FG_time_possible_units = ["IU", "ms", "s"];

/*----- INITIALIZATIONS----- */
OneRot_IU_value.value = "2000"; //500lines encoder
FG_pos_rot.value = "IU";
FG_spd_rot.value = "IU";
FG_acc_rot.value = "IU";
FG_time_units.value = "IU";
FG_pos_lin.value = "IU";
FG_spd_lin.value = "IU";
FG_acc_lin.value = "IU";

FG_pos_rot_p.value = "rot";
FG_spd_rot_p.value = "rpm";
FG_acc_rot_p.value = "IU";
FG_time_units_p.value = "ms";
FG_pos_lin_p.value = "mm";
FG_spd_lin_p.value = "mm/s";
FG_acc_lin_p.value = "IU";

pdo_obj_value_1.value = "6040";
SDO_subindex_value_CM.value = "00";
PDO_subindex_input_1.value = "00";
PDO_subindex_input_2.value = "00";
PDO_subindex_input_3.value = "00";
PDO_subindex_input_4.value = "00";
Compose_msgAxisID.value = "1";

PDO_helping_FG_1.value = "IU";
PDO_helping_FG_2.value = "IU";
PDO_helping_FG_3.value = "IU";
PDO_helping_FG_4.value = "IU";

/*----- PDO has been detected----- */
PDO_detect_obj_subindex_1.value = "00";
PDO_detect_obj_subindex_2.value = "00";
PDO_detect_obj_subindex_3.value = "00";
PDO_detect_obj_subindex_4.value = "00";

/*----- PDOs----- */

RPDO_1 = [
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
];
RPDO_2 = [
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
];
RPDO_3 = [
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
];
RPDO_4 = [
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
];
TPDO_1 = [
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
];
TPDO_2 = [
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
];
TPDO_3 = [
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
];
TPDO_4 = [
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
];

/*----- DELETE----- */

// SDO_input_value_CM.value = "10203040";

// pdo_obj_value_1.value = "607a";
// pdo_obj_value_2.value = "6081";
// pdo_obj_value_3.value = "6083";
// pdo_obj_value_4.value = "1800";
// PDO_subindex_input_4.value = "03";

// SDO_obj_input_CM.value = "607A";

A2_COB_ID_field_flyingModal.value = "587";
// A2_DATA_field_flyingModal.value = "23 8160 00 12AB34CD";
A2_DATA_field_flyingModal.value = "60 81 60 00 00 000500";
// A2_DATA_field_flyingModal.value = "40 40 7896";
// A2_DATA_field_flyingModal.value = "40 40 60 004585";

A2_COB_ID_field_flyingModal.value = "081";
A2_DATA_field_flyingModal.value = "10 82 11 00 00 00 00 00";

//please delete
